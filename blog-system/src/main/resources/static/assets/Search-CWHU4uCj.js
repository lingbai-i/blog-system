import{p as q,aA as U,az as I,c as o,o as t,a,I as J,P as n,ag as i,J as c,L as d,M as l,O as h,a6 as m,H as u,aq as L,G as v}from"./vendor-DAHo6VuW.js";import{_ as M}from"./index-C_Y6TLtC.js";import"./elementPlus-Da0LKy-i.js";const O={class:"search-redirect"},R={class:"loading-container"},T={class:"search-results"},$={class:"container"},j={key:0,class:"search-stats"},E={key:0},G={key:1},H={key:2},Q={key:3},W={key:1,class:"loading"},X={key:2,class:"blog-list"},Y=["onClick"],Z={class:"blog-content"},b={key:0,class:"blog-image"},x=["src","alt"],ee={class:"blog-title"},se={class:"blog-summary"},te={class:"blog-meta"},oe={class:"author"},ae={class:"date"},ne={key:0,class:"category"},re={class:"views"},ie={class:"likes"},le={key:1,class:"blog-tags"},ce={key:3,class:"no-results"},de={key:4,class:"search-suggestions"},ue={class:"suggestion-tags"},_e={key:5,class:"pagination"},pe={__name:"Search",setup(ge){const C=I(),f=U();q(()=>{const e={...f.query};C.replace({path:"/articles",query:e})});const y=e=>{if(!e.images)return null;try{const r=typeof e.images=="string"?JSON.parse(e.images):e.images;if(Array.isArray(r)&&r.length>0)return r[0]}catch(r){console.error("解析图片数据失败:",r)}return null};return(e,r)=>{const S=i("el-loading-directive"),w=i("el-skeleton"),z=i("User"),_=i("el-icon"),F=i("Calendar"),P=i("Folder"),K=i("View"),N=i("Star"),k=i("el-tag"),V=i("el-button"),A=i("el-empty"),B=i("el-pagination"),D=L("loading");return t(),o("div",O,[a("div",R,[J(n(S,{text:"正在跳转到文章页面..."},null,512),[[D,!0]])]),a("div",T,[a("div",$,[e.searchPerformed||!e.searchKeyword&&!e.categoryFilter?(t(),o("div",j,[a("p",null,[e.searchKeyword?(t(),o("span",E,'搜索 "'+l(e.searchKeyword)+'"',1)):c("",!0),e.categoryFilter?(t(),o("span",G,' 在分类 "'+l(e.categoryFilter)+'" 中',1)):c("",!0),!e.searchKeyword&&!e.categoryFilter?(t(),o("span",H,"共有")):c("",!0),e.searchKeyword||e.categoryFilter?(t(),o("span",Q,"找到")):c("",!0),d(" "+l(e.total)+" 篇文章 ",1)])])):c("",!0),e.loading?(t(),o("div",W,[n(w,{rows:3,animated:""})])):e.blogs.length>0?(t(),o("div",X,[(t(!0),o(h,null,m(e.blogs,s=>{var p;return t(),o("div",{key:s.id,class:"blog-card",onClick:g=>e.goToBlogDetail(s.id)},[a("div",Z,[y(s)?(t(),o("div",b,[a("img",{src:y(s),alt:s.title},null,8,x)])):c("",!0),a("h3",ee,l(s.title),1),a("p",se,l(s.summary||((p=s.content)==null?void 0:p.substring(0,150))+"..."),1),a("div",te,[a("span",oe,[n(_,null,{default:u(()=>[n(z)]),_:1}),d(" "+l(s.authorName),1)]),a("span",ae,[n(_,null,{default:u(()=>[n(F)]),_:1}),d(" "+l(e.formatDate(s.publishedAt||s.createdAt)),1)]),s.category?(t(),o("span",ne,[n(_,null,{default:u(()=>[n(P)]),_:1}),d(" "+l(s.category),1)])):c("",!0),a("span",re,[n(_,null,{default:u(()=>[n(K)]),_:1}),d(" "+l(s.viewCount||0),1)]),a("span",ie,[n(_,null,{default:u(()=>[n(N)]),_:1}),d(" "+l(s.likeCount||0),1)])]),s.tags?(t(),o("div",le,[(t(!0),o(h,null,m(s.tags.split(","),g=>(t(),v(k,{key:g,size:"small",class:"tag"},{default:u(()=>[d(l(g.trim()),1)]),_:2},1024))),128))])):c("",!0)])],8,Y)}),128))])):e.searchPerformed?(t(),o("div",ce,[n(A,{description:"没有找到相关文章"},{default:u(()=>[n(V,{type:"primary",onClick:e.clearSearch},{default:u(()=>r[2]||(r[2]=[d("清空搜索")])),_:1,__:[2]},8,["onClick"])]),_:1})])):!e.searchPerformed&&e.searchKeyword.trim()===""&&e.categoryFilter===""&&e.blogs.length===0?(t(),o("div",de,[r[3]||(r[3]=a("h3",null,"搜索建议",-1)),a("div",ue,[(t(!0),o(h,null,m(e.searchSuggestions,s=>(t(),v(k,{key:s,class:"suggestion-tag",onClick:p=>e.searchSuggestion(s)},{default:u(()=>[d(l(s),1)]),_:2},1032,["onClick"]))),128))])])):c("",!0),e.total>e.pageSize?(t(),o("div",_e,[n(B,{"current-page":e.currentPage,"onUpdate:currentPage":r[0]||(r[0]=s=>e.currentPage=s),"page-size":e.pageSize,"onUpdate:pageSize":r[1]||(r[1]=s=>e.pageSize=s),"page-sizes":[10,20,50],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):c("",!0)])])])}}},ke=M(pe,[["__scopeId","data-v-8026c260"]]);export{ke as default};
