import{r as k,m as B,c as r,o as i,P as t,u as e,a as s,H as o,L as c,J as v,G as D,M as _,ax as E,aw as N}from"./vendor-qcSz3H5x.js";import{a as T}from"./index-xsH4HHeE.js";import{R as z,B as M,Q as m,G as w,N as u,f as V,n as H,H as L,U as R,C as P,V as G,z as d}from"./elementPlus-Cz6C--fH.js";import{_ as I}from"./index-CbgkKY63.js";const S={class:"announcement-detail-page"},$={key:0,class:"loading-container"},J={key:1,class:"announcement-detail"},Q={class:"back-button"},U={class:"announcement-header"},j={class:"title-section"},q={class:"announcement-title"},F={class:"announcement-meta"},K={class:"meta-item"},O={class:"meta-item"},W={key:0,class:"meta-item"},X={key:0,class:"pinned-badge"},Y={class:"announcement-content"},Z=["innerHTML"],ee={class:"action-buttons"},te={key:2,class:"error-state"},ae={__name:"AnnouncementDetail",setup(ne){const x=E(),b=N(),n=k(null),f=k(!0),C=async()=>{var l;try{f.value=!0;const a=x.params.id,y=await T.get(`/api/announcements/${a}`);y.data.success?(n.value=y.data.data,document.title=`${n.value.title} - 公告详情`):d.error("获取公告详情失败")}catch(a){console.error("获取公告详情失败:",a),((l=a.response)==null?void 0:l.status)===404?d.error("公告不存在"):d.error("获取公告详情失败，请稍后重试")}finally{f.value=!1}},p=()=>{b.push("/announcements")},A=()=>{navigator.share?navigator.share({title:n.value.title,text:n.value.title,url:window.location.href}).catch(l=>{console.log("分享失败:",l),h()}):h()},h=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{d.success("链接已复制到剪贴板")}).catch(()=>{d.error("复制失败，请手动复制链接")})},g=l=>l?new Date(l).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return B(()=>{C()}),(l,a)=>(i(),r("div",S,[f.value?(i(),r("div",$,[t(e(z),{rows:8,animated:""})])):n.value?(i(),r("div",J,[s("div",Q,[t(e(m),{onClick:p,icon:e(M),type:"info",plain:""},{default:o(()=>a[0]||(a[0]=[c(" 返回公告列表 ")])),_:1,__:[0]},8,["icon"])]),s("div",U,[s("div",j,[s("h1",q,[n.value.isPinned?(i(),D(e(u),{key:0,class:"pin-icon"},{default:o(()=>[t(e(w))]),_:1})):v("",!0),c(" "+_(n.value.title),1)]),s("div",F,[s("div",K,[t(e(u),null,{default:o(()=>[t(e(V))]),_:1}),s("span",null,_(n.value.authorName),1)]),s("div",O,[t(e(u),null,{default:o(()=>[t(e(H))]),_:1}),s("span",null,_(g(n.value.publishedAt)),1)]),n.value.updatedAt!==n.value.createdAt?(i(),r("div",W,[t(e(u),null,{default:o(()=>[t(e(L))]),_:1}),s("span",null,"更新于 "+_(g(n.value.updatedAt)),1)])):v("",!0)])]),n.value.isPinned?(i(),r("div",X,[t(e(R),{type:"danger",size:"large"},{default:o(()=>[t(e(u),null,{default:o(()=>[t(e(w))]),_:1}),a[1]||(a[1]=c(" 置顶公告 "))]),_:1,__:[1]})])):v("",!0)]),s("div",Y,[s("div",{class:"content-wrapper",innerHTML:n.value.content},null,8,Z)]),s("div",ee,[t(e(m),{onClick:p,size:"large"},{default:o(()=>a[2]||(a[2]=[c(" 返回列表 ")])),_:1,__:[2]}),t(e(m),{type:"primary",onClick:A,size:"large"},{default:o(()=>[t(e(u),null,{default:o(()=>[t(e(P))]),_:1}),a[3]||(a[3]=c(" 分享 "))]),_:1,__:[3]})])])):(i(),r("div",te,[t(e(G),{icon:"warning",title:"公告不存在","sub-title":"您访问的公告可能已被删除或不存在"},{extra:o(()=>[t(e(m),{type:"primary",onClick:p},{default:o(()=>a[4]||(a[4]=[c("返回公告列表")])),_:1,__:[4]})]),_:1})]))]))}},re=I(ae,[["__scopeId","data-v-be91dae1"]]);export{re as default};
